name: Run in Python Virtual Environment
description: Runs the specified command inside of the Python virtual environment
inputs:
  makefile_target:
    description: Name of the Makefile target to run
    required: true

runs:
  using: "composite"
  steps:
    - name: Set up Python 3.12
      uses: actions/setup-python@v6
      with:
        python-version: '3.12'
    - name: Setup Virtual Environment
      shell: bash
      run: make setup_venv_force
    - name: Run Command
      shell: bash
      run: |
        source .venv/bin/activate
        make ${{ inputs.makefile_target }}
